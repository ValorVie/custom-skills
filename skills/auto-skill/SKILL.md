---
name: auto-skill
description: "自進化知識系統。管理跨技能經驗記憶與領域知識庫。可手動呼叫 /auto-skill 查看或管理知識庫內容。知識注入由 auto-skill-hooks 插件自動完成（SessionStart hook）。"
---

# Auto-Skill 自進化知識系統

## 概述

Auto-Skill 提供兩個核心功能：

1. **知識庫（knowledge-base）**：按領域分類的通用知識與最佳實踐
2. **技能經驗（experience）**：使用特定 skill 時累積的經驗與技巧

知識索引在每次對話開始時由 `auto-skill-hooks` 插件自動注入到 context。行為指令定義在 `~/.claude/CLAUDE.md` 的「知識庫與經驗協議」區塊。

手動呼叫 `/auto-skill` 可用於查看、新增或管理知識庫內容。

---

## 任務結束：主動記錄

> **任務明顯已完成**：你判斷本回合已完成且值得記錄時
> **觸發詞**：用戶表達對任務滿意時

**你必須執行以下步驟：**
1. **總結經驗**：用一句話提煉本次解決方案的精華
2. **判斷價值**：這個經驗下次能幫用戶省時間嗎？
3. **主動詢問**：必須說出類似這樣的話：
   > 「這次我們解決了 [問題描述]，我想把這個經驗記錄到你的知識庫，下次遇到類似問題時可以直接參考。你覺得可以嗎？」
4. **執行記錄**：用戶同意後，依下列規則寫入並更新索引：
   - **跨技能經驗**：若本回合使用非 auto-skill，且該技能在 experience 中不存在或有新技巧 → 寫入 `experience/skill-[skill-id].md`，更新 `experience/_index.json`
   - **一般知識**：若為通用流程/偏好/解法 → 寫入 `knowledge-base/[category].md`，更新 `knowledge-base/_index.json`

**缺少經驗時必問**：若本回合使用了非 auto-skill 技能，且該技能不在 `experience/_index.json`，任務結束時必須主動詢問是否記錄。

---

## 記錄判斷準則

**核心問題：這東西下次能讓用戶省時間嗎？**

### General（knowledge-base）

**應該記錄：**
- 可重用的流程與決策步驟（跨領域通用的操作順序/判斷流程）
- 高成本的錯誤與修正路徑（犯錯會浪費大量時間的情況）
- 關鍵參數/設定/前置條件（一變就影響結果的要素）
- 使用者偏好與風格規則（語氣、格式、設計風格、輸出結構）
- 多次嘗試才成功的方案（包含失敗原因與成功條件）
- 可套用的模板/清單/格式（會反覆使用的輸出樣式）
- 外部依賴或資源位置（檔案路徑、工具、素材）

**不應記錄：**
- 一問一答、沒有可重用流程
- 純概念解釋（沒有具體做法或判斷標準）
- 沒有具體上下文、不可復用的結論

### Experience（非 auto-skill 經驗）

**應該記錄：**
- 使用該技能時踩到的坑與解法（含錯誤訊息/定位方式）
- 影響結果的關鍵參數或配置
- 可重用的模板/提示詞/工作流程（可直接套用）
- 依賴或資產路徑（字體、圖片、專案入口、模組位置）
- 需要特定順序或技巧才成功的步驟

**不應記錄：**
- 純理論或概念性解釋（留在 knowledge-base）
- 沒有可重現步驟的結論
- 一次性、不可重用的操作

---

## 條目格式

### knowledge-base 條目格式
```markdown
## [簡短標題]
**日期：** YYYY-MM-DD
**情境：** 一句話描述使用場景
**最佳實踐：**
- [重點 1]
- [重點 2] - 參數說明和調整指南
```

### experience 條目格式
```markdown
## [問題/技巧標題]
**日期：** YYYY-MM-DD
**技能：** [skill-id]
**情境：** 一句話描述本次問題
**解法：**
- 具體步驟 1
- 具體步驟 2
**關鍵檔案/路徑：**
- /path/to/file
**keywords：** keyword1, keyword2, keyword3
```

---

## 存儲路徑

- 知識索引：`knowledge-base/_index.json`
- 知識內容：`knowledge-base/[category].md`
- 經驗索引：`experience/_index.json`
- 經驗內容：`experience/skill-[skill-id].md`

---

## 動態分類（僅 knowledge-base）

當用戶的問題不屬於現有分類時：
1. 建議創建新分類
2. 詢問用戶分類名稱和關鍵詞
3. 創建新的 `.md` 文件並更新 `_index.json`
