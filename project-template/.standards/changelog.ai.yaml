# Changelog Standards - AI Optimized (v2 Dual-Layer)
# Source: core/changelog-standards.md

standard:
  id: changelog
  name: Changelog Standards
  description: Keep a Changelog format for documenting notable changes
  guidelines:
    - "Maintain a CHANGELOG.md file"
    - "Use Keep a Changelog format"
    - "Update [Unreleased] section during development"
    - "Follow Semantic Versioning"

  meta:
    version: "2.0.0"
    updated: "2026-02-04"
    source: core/changelog-standards.md
    description: Keep a Changelog format for documenting notable changes

  options:
    changelog_format:
      description: Select changelog format approach
      multiSelect: false
      choices:
        - id: keep-a-changelog
          file: options/changelog/keep-a-changelog.ai.yaml
          best_for: Manual, human-readable changelogs
        - id: auto-generated
          file: options/changelog/auto-generated.ai.yaml
          best_for: Automated generation from commits

  format:
    filename: CHANGELOG.md
    structure: |
      # Changelog

      All notable changes to this project will be documented in this file.

      The format is based on [Keep a Changelog](https://keepachangelog.com/).

      ## [Unreleased]

      ### Added
      - New features

      ### Changed
      - Changes in existing functionality

      ### Deprecated
      - Soon-to-be removed features

      ### Removed
      - Removed features

      ### Fixed
      - Bug fixes

      ### Security
      - Security vulnerabilities

      ## [1.0.0] - 2025-01-01

      ### Added
      - Initial release

  change_types:
    - type: Added
      description: New features
      order: 1
    - type: Changed
      description: Changes in existing functionality
      order: 2
    - type: Deprecated
      description: Soon-to-be removed features
      order: 3
    - type: Removed
      description: Removed features
      order: 4
    - type: Fixed
      description: Bug fixes
      order: 5
    - type: Security
      description: Security vulnerability fixes
      order: 6

  rules:
    - id: unreleased-section
      trigger: making changes
      instruction: Add entries to [Unreleased] section during development
      priority: required
    - id: version-on-release
      trigger: releasing new version
      instruction: Move [Unreleased] entries to new version section with date
      priority: required
    - id: semantic-versioning
      trigger: choosing version number
      instruction: Follow SemVer (MAJOR.MINOR.PATCH)
      priority: required
    - id: date-format
      trigger: adding release date
      instruction: Use ISO format YYYY-MM-DD
      validator: "^\\d{4}-\\d{2}-\\d{2}$"
      priority: required
    - id: reverse-chronological
      trigger: ordering versions
      instruction: List newest version first
      priority: required
    - id: link-versions
      trigger: adding version section
      instruction: Add comparison links at bottom of file
      priority: recommended

physical_spec:
  type: filesystem_schema
  validator:
    command: "test -f CHANGELOG.md"
    rule: "changelog_exists"
  fixer:
    type: command
    command: 'echo "# Changelog\n\nAll notable changes to this project will be documented in this file.\n\n## [Unreleased]\n\n### Added\n- Initial release" > CHANGELOG.md'